<div id="page-wrapper" class="gray-bg">
    <div class="row border-bottom">
        <nav class="navbar navbar-static-top" role="navigation">
            <div class="navbar-header">
                <a class="navbar-minimalize minimalize-styl-2 btn btn-primary" ng-click="closeMenu()"><i class="fa fa-bars"></i> </a>
            </div>
            <ul class="nav navbar-top-links navbar-right">
                <li>
                    <span class="m-r-sm text-muted welcome-message">
                        Welcome to The Winesider
                    </span>
                </li>
                <li>
                    <a ng-click="logout()">
                        <i class="fa fa-sign-out"></i> Log out
                    </a>
                </li>
            </ul>
        </nav>
    </div>
    <div class="wrapper wrapper-content animated fadeInRight">
        <div class="p-w-md m-t-sm">
            <div class="row">
                <div class="col-sm-6">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>
                                Sales in October
                            </h5>
                        </div>
                        <div class="ibox-content">
                            <h1 class="m-b-xs">
                                278
                            </h1>
                            <small>
                                Bottles
                            </small>
                            <div id="sparkline1" class="m-b-sm"></div>
                            <div class="row">
                                <div class="col-xs-6">
                                    <small class="stats-label">Average receipt</small>
                                    <h4>19.5€</h4>
                                </div>

                                <div class="col-xs-6">
                                    <small class="stats-label">Best wine</small>
                                    <h4>Malabaila Roero Arneis DOCG 2015 0,75 lt</h4>
                                </div>
                                <div>
                                    <canvas id="doughnutChart" height="140"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>Sales in last 24h </h5>
                        </div>
                        <div class="ibox-content">
                            <h1 class="m-b-xs">
                                15
                            </h1>
                            <small>
                                Bottles
                            </small>
                            <div id="sparkline2" class="m-b-sm"></div>
                            <div class="row">
                                <div class="col-xs-6">
                                    <small class="stats-label">Average receipt</small>
                                    <h4>17€</h4>
                                </div>

                                <div class="col-xs-6">
                                    <small class="stats-label">Best wine</small>
                                    <h4>Franciacorta Brut Saten</h4>
                                </div>
                                <div>
                                    <canvas id="doughnutChart2" height="140"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ibox-content m-b-sm border-bottom">
                    <div class="row">
                        <div class="col-sm-3">
                            <div class="form-group">
                                <label class="control-label" for="product_name">Search</label>
                                <input ng-model="name.filterModel" type="text" id="product_name" name="product_name" ng-value="" placeholder="Product Name" class="form-control">
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group">
                                <label class="control-label" for="status">Producer</label>
                                <select name="status" id="status" class="form-control" ng-model="producer.filterModel">
                                    <option value="" selected>All</option>
                                    <option ng-repeat="producer in producers" ng-value="producer.producer">{{producer.producer}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group">
                                <label class="control-label" for="status">Region</label>
                                <select name="status" id="status" class="form-control" ng-model="region.filterModel">
                                    <option value="" selected>All</option>
                                    <option ng-repeat="region in regions" ng-value="region.region">{{region.region}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <div class="form-group">
                                <label class="control-label" for="status">Type</label>
                                <select name="status" id="status" class="form-control" ng-model="type.filterModel">
                                    <option value="" selected>Tutti</option>
                                    <option value="Bianco">Bianco</option>
                                    <option value="Rosso">Rosso</option>
                                    <option value="Bollicine">Bollicine</option>
                                    <option value="Rosato">Rosato</option>
                                    <option value="Champagne">Champagne</option>
                                    <option value="Vino dolce">Vino dolce</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" ng-init="getWineList()">
                    <div class="col-lg-12">
                        <div class="ibox">
                            <div class="ibox-content">
                                <table class="footable table table-stripped toggle-arrow-tiny" data-page-size="15">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Name</th>
                                            <th>Total sold</th>
                                            <th>Type</th>
                                            <th>Region</th>
                                            <th>Alcohol</th>
                                            <!--th>Catalog</th>
<!--th class="text-right" data-sort-ignore="true">Action</th-->
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="wine in wines | filter:{description : name.filterModel, type: type.filterModel, region : region.filterModel, producer : producer.filterModel}" >
                                            <td>
                                                {{$index+1}}
                                            </td>
                                            <td>
                                                {{wine.description}}
                                            </td>
                                            <td>
                                                {{$index}}
                                            </td>
                                            <td>
                                                <span class="label label-{{wine.type}}">{{wine.type}}</span>
                                            </td>
                                            <td>
                                                {{wine.region}}
                                            </td>
                                            <td>
                                                {{wine.alcohol}}&deg;
                                            </td>
                                            <!--td class="text-right">
<div class="btn-group">
<button class="btn-white btn btn-xs">View</button>
<button class="btn-white btn btn-xs">Edit</button>
</div>
</td-->
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function() {

        var doughnutData = {
            labels: ["Rosso","Bianco","Champagne","Dolce","Rosato" ],
            datasets: [{
                data: [150,60,20,8,40],
                backgroundColor: ["#800000","#EEE","#D1B78F","#D7B257","#E5AF82"]
            }]
        } ;

        var doughnutOptions = {
            responsive: true
        };


        var ctx4 = document.getElementById("doughnutChart").getContext("2d");
        new Chart(ctx4, {type: 'doughnut', data: doughnutData, options:doughnutOptions});

        var doughnutData2 = {
            labels: ["Rosso","Bianco","Champagne","Dolce","Rosato" ],
            datasets: [{
                data: [8,1,2,1,3],
                backgroundColor: ["#800000","#EEE","#D1B78F","#D7B257","#E5AF82"]
            }]
        } ;

        var doughnutOptions = {
            responsive: true
        };


        var ctx5 = document.getElementById("doughnutChart2").getContext("2d");
        new Chart(ctx5, {type: 'doughnut', data: doughnutData, options:doughnutOptions});

        var sparklineCharts = function(){
            $("#sparkline1").sparkline([34, 43, 43, 35, 44, 32, 44, 52], {
                type: 'line',
                width: '100%',
                height: '50',
                lineColor: '#1ab394',
                fillColor: "transparent"
            });

            $("#sparkline2").sparkline([32, 11, 25, 37, 41, 32, 34, 42], {
                type: 'line',
                width: '100%',
                height: '50',
                lineColor: '#1ab394',
                fillColor: "transparent"
            });

            $("#sparkline3").sparkline([34, 22, 24, 41, 10, 18, 16,8], {
                type: 'line',
                width: '100%',
                height: '50',
                lineColor: '#1C84C6',
                fillColor: "transparent"
            });
        };

        var sparkResize;

        $(window).resize(function(e) {
            clearTimeout(sparkResize);
            sparkResize = setTimeout(sparklineCharts, 500);
        });

        sparklineCharts();




        var data1 = [
            [0,4],[1,8],[2,5],[3,10],[4,4],[5,16],[6,5],[7,11],[8,6],[9,11],[10,20],[11,10],[12,13],[13,4],[14,7],[15,8],[16,12]
        ];
        var data2 = [
            [0,0],[1,2],[2,7],[3,4],[4,11],[5,4],[6,2],[7,5],[8,11],[9,5],[10,4],[11,1],[12,5],[13,2],[14,5],[15,2],[16,0]
        ];
        $("#flot-dashboard5-chart").length && $.plot($("#flot-dashboard5-chart"), [
            data1,  data2
        ],
                                                     {
            series: {
                lines: {
                    show: false,
                    fill: true
                },
                splines: {
                    show: true,
                    tension: 0.4,
                    lineWidth: 1,
                    fill: 0.4
                },
                points: {
                    radius: 0,
                    show: true
                },
                shadowSize: 2
            },
            grid: {
                hoverable: true,
                clickable: true,

                borderWidth: 2,
                color: 'transparent'
            },
            colors: ["#1ab394", "#1C84C6"],
            xaxis:{
            },
            yaxis: {
            },
            tooltip: false
        }
                                                    );

    });
</script>
